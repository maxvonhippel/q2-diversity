webpackJsonp([0],[function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var n=a(1),l=r(n);(0,l.default)()},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(){var t=metrics[0],e=categories[0],a=(0,l.select)("#main"),r=a.insert("div",":first-child").attr("class","viz row"),n=a.insert("div",":first-child").attr("class","viz row"),i=a.insert("div",":first-child").attr("class","viz row"),s=r.append("div").attr("class","col-xs-12 tableCol").style("max-width","1000px").style("margin-top","20px"),u=i.append("div").attr("class","col-lg-12"),d=n.append("div").attr("class","col-lg-9").style("width","1120px"),f=n.append("div").style("height","470px").attr("class","col-lg-2"),p=s.append("div").attr("class","stats").append("table").attr("class","table table-hover table-bordered").style("margin-bottom","10px");p.append("thead").append("tr").attr("class","tableHead").selectAll("th").data([["Percentile",2],["Metric",2]]).enter().append("th").text(function(t){return t[0]}).attr("class",function(t){return"col-xs-"+t[1]});var h=[["2nd","..."],["9th","..."],["25th","..."],["50th (Median)","..."],["75th","..."],["91st","..."],["98th","..."]],v=p.append("tbody").attr("class","tableBody").selectAll("tr").data(h).enter().append("tr");v.selectAll("td").data(function(t){return t}).enter().append("td").text(function(t){return t});var y=d.append("svg").attr("viewBox","0 0 1120 470"),g=y.append("g");g.append("g").attr("class","x axis"),g.append("g").attr("class","y axis"),g.append("text").attr("class","x label"),g.append("text").attr("class","y label");var x=f.append("div").style("height","25px").style("width","300px").style("overflow-y","hidden").style("overflow-x","auto").append("svg").attr("viewBox","0 0 200 20").attr("class","legendTitleSvg").append("g").attr("class","legendTitle"),m=f.append("div").style("height","445px").style("width","300px").style("overflow-y","scroll").style("overflow-x","auto").attr("class","legendBoxDiv").append("svg").attr("viewBox","0 0 300 445").attr("class","legendBoxSvg").append("g");a.insert("h1",":first-child").text("Alpha Rarefaction"),c.default.initialize(t,e,u,y,m,x),(0,o.addMetricPicker)(u,metrics,t),categories.length>0&&(0,o.addCategoryPicker)(u,categories,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var l=a(2),i=a(3),c=r(i),o=a(8)},,function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e,a,r,n,l){r.attr("action",t+".csv");var i=d[t];e&&(i=d[t][e]);var o=(0,c.setupData)(i,t);(0,s.default)(a,o,e,n,l)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),c=a(4),o=a(5),s=r(o),u=null,f=function(){function t(){return n(this,t),u||(u=this),this.category="",this.metric="",this.svg=null,this.href=null,this.legend=null,this.legendTitle=null,u}return i(t,[{key:"initialize",value:function(t,e,a,r,n,i){var c=a.append("div").attr("class","col-lg-2 form-group downloadCSV");c.append("label").text(""),this.href=c.append("form").attr("method","GET").attr("action","#"),this.href.append("button").attr("class","btn btn-block btn-primary btn-md form-control").attr("role","button").attr("aria-pressed","true").text("Download CSV"),this.svg=r,this.metric=t,this.category=e,this.legend=n,this.legendTitle=i,l(t,e,this.svg,this.href,this.legend,this.legendTitle)}},{key:"setCategory",value:function(t){this.category=t,l(this.metric,this.category,this.svg,this.href,this.legend,this.legendTitle)}},{key:"setMetric",value:function(t){this.metric=t,l(this.metric,this.category,this.svg,this.href,this.legend,this.legendTitle)}},{key:"getCategory",value:function(){return this.category}},{key:"getMetric",value:function(){return this.metric}},{key:"getSvg",value:function(){return this.svg}}]),t}(),p=new f;e.default=p},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){var a="Sequencing Depth",r=e,n=1/0,l=0,i=1/0,c=0,o=t.columns.indexOf("depth"),s=t.columns.indexOf("2"),u=t.columns.indexOf("98");return t.data.forEach(function(t){var e=t[o];e<n&&(n=e),e>l&&(l=e),t[s]<i&&(i=t[s]),t[u]>c&&(c=t[u])}),{data:t,xAxisLabel:a,yAxisLabel:r,minX:n,maxX:l,minY:i,maxY:c}}function l(t,e,a){s[t]=e,s[t].dotsOpacity=1,s[t].lineOpacity=1,s[t].dots=a,s[t].line=a}function i(t,e,a){null!==e&&(s[t].dots=e,s[t].dotsOpacity="white"===e?0:1,o.default.getSvg().selectAll('[class="circle '+t+'"]').attr("opacity",s[t].dotsOpacity)),null!==a&&(s[t].line=a,s[t].lineOpacity="white"===a?0:1,o.default.getSvg().selectAll('[class="line '+t+'"]').attr("opacity",s[t].lineOpacity))}Object.defineProperty(e,"__esModule",{value:!0}),e.curData=void 0,e.setupData=n,e.appendSeries=l,e.toggle=i;var c=a(3),o=r(c),s={};e.curData=s},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t){var e=(0,o.select)(".tableHead");e.style("background-color","white");var a=e.selectAll("th")._groups[0][1];return(0,o.select)(a).text(t.yAxisLabel),(0,o.select)(".tableBody").selectAll("tr").data([["2nd","..."],["9th","..."],["25th","..."],["50th (Median)","..."],["75th","..."],["91st","..."],["98th","..."]]).selectAll("td").data(function(t){return t}).text(function(t){return t}),e}function l(t,e,a,r,l,i,s){function u(t){t.attr("class",function(t){return"circle "+t[O]}).attr("fill",function(t){return _(t[O])}).attr("opacity",function(t){return f.curData[t[O]].dotsOpacity}).attr("stroke",function(t){return _(t[O])}).attr("cx",function(t){return a(t[v])}).attr("cy",function(t){return r(t[m])}).on("mouseover",function(t){1===f.curData[t[O]].dotsOpacity&&((0,o.select)(".tableBody").selectAll("tr").data([["2nd",t[y]],["9th",t[g]],["25th",t[x]],["50th (Median)",t[m]],["75th",t[b]],["91st",t[w]],["98th",t[k]]]).selectAll("td").data(function(t){return t}).text(function(t){return t}),S.style("background-color",""+_(t[O])))})}var p=t.select("g"),h=(0,o.select)(i.node().parentNode),v=e.data.columns.indexOf("depth"),y=e.data.columns.indexOf("2"),g=e.data.columns.indexOf("9"),x=e.data.columns.indexOf("25"),m=e.data.columns.indexOf("50"),b=e.data.columns.indexOf("75"),w=e.data.columns.indexOf("91"),k=e.data.columns.indexOf("98"),O=e.data.columns.indexOf("sample-id");O===-1&&(O=e.data.columns.indexOf(l));var A=[e.data.data][0],M=new Set(Array.from(A,function(t){return t[O]})),_=(0,o.scaleOrdinal)(o.schemeCategory20).domain(M),D=Array.from(M);i.selectAll(".legend").remove(),s.selectAll(".legend").remove(),i.attr("height",20*D.length);var S=n(e),P=0,C="Select%20All";(0,f.appendSeries)(C,[],"black"),(0,f.toggle)(C,"white",null),(0,d.default)(s,C,10,_);var L=!0,j=!1,T=void 0;try{for(var B,I=function(){var t=c(B.value,2),e=t[0],a=t[1];P=20*(e+.5);var r=A.filter(function(t){return t[O]===a}).sort(function(t,e){return t[v]-e[v]}),n=_(a);(0,f.appendSeries)(a,r,n),(0,f.toggle)(a,"white",null),(0,d.default)(i,a,P,_)},X=D.entries()[Symbol.iterator]();!(L=(B=X.next()).done);L=!0)I()}catch(t){j=!0,T=t}finally{try{!L&&X.return&&X.return()}finally{if(j)throw T}}var Y=p.selectAll(".circle").data(A);Y.exit().transition().remove();var z=Y.enter().append("circle").attr("r",4);Y.call(u),z.call(u),h.attr("viewBox","0 0 200 "+(P+10));var E=(0,o.line)().x(function(t){return a(t[v])}).y(function(t){return r(t[m])}),N=(0,o.nest)().key(function(t){return t[O]}).entries(A),G=p.selectAll(".line").data(N);G.exit().transition().remove(),G.enter().append("path").attr("class",function(t){return"line "+t.key}).attr("stroke",function(t){return _(t.key)}).attr("opacity",function(t){return f.curData[t.key].lineOpacity}).attr("fill","none").attr("d",function(t){return E(t.values)}),G.attr("class",function(t){return"line "+t.key}).attr("stroke",function(t){return _(t.key)}).attr("opacity",function(t){return f.curData[t.key].lineOpacity}).attr("d",function(t){return E(t.values)})}function i(t,e,a,r,n){var i=400,c=1e3,u={top:20,left:80,right:50,bottom:50},d=t.select("g"),f=e.xAxisLabel,p=e.yAxisLabel,h=e.minX,v=e.maxX,y=e.minY,g=e.maxY,x=(0,o.axisBottom)(),m=(0,o.axisLeft)(),b=.03*(v-h);if(Number.isInteger(h)&&Number.isInteger(v)){b=Math.max(Math.round(b),1);var w=Math.max(3,v-h+2*b);x.ticks(Math.min(w,12),"d")}var k=(0,o.scaleLinear)().domain([h-b,v+b]).range([0,c]).nice(),O=(0,o.scaleLinear)().domain([y,g]).range([i,0]).nice();x.scale(k),m.scale(O),(0,s.setupXLabel)(t,c,i,f,x);var A=(0,s.setupYLabel)(t,i,p,m),M=Math.max(u.left,A);t.attr("width",c+M+u.right).attr("height",i+u.bottom+u.top),(0,o.select)(t.node().parentNode).style("width",c+M+u.right+"px").style("height",i+u.bottom+u.top+"px"),d.attr("transform","translate("+M+","+u.top+")"),(0,o.select)(".tableCol").style("margin-left",M+10+"px"),l(t,e,k,O,a,r,n)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){var a=[],r=!0,n=!1,l=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!e||a.length!==e);r=!0);}catch(t){n=!0,l=t}finally{try{!r&&c.return&&c.return()}finally{if(n)throw l}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=i;var o=a(2),s=a(6),u=a(7),d=r(u),f=a(4)},function(t,e,a){"use strict";function r(t,e,a,r,n){t.select(".x.axis").attr("transform","translate(0,"+a+")").transition().call(n),t.select(".x.label").attr("text-anchor","middle").style("font","12px sans-serif").text(r).attr("transform","translate("+e/2+","+(a+40)+")")}function n(t,e,a,r){var n=t.select(".y.axis").call(r),i=t.select(".y.label").attr("text-anchor","middle").style("font","12px sans-serif").text(a),c=Array.from(n.selectAll("text")._groups[0]).map(function(t){return t.getComputedTextLength()}),o=(0,l.max)(c)+20;return i.attr("transform","translate(-"+o+","+e/2+")rotate(-90)"),o}Object.defineProperty(e,"__esModule",{value:!0}),e.setupXLabel=r,e.setupYLabel=n;var l=a(2)},function(t,e,a){"use strict";function r(t,e,a,r){var i="Select%20All",c=t.append("rect").attr("id","rect"+e).attr("class","legend rect").attr("x",0).attr("y",a-2.5).attr("width",15).attr("height",5).attr("stroke","darkGrey").attr("fill",l.curData[e].line);c.on("click",function(){var t=0===l.curData[e].lineOpacity;if(e===i){var a=!0,o=!1,s=void 0;try{for(var u,d=Object.keys(l.curData).slice(1)[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value,p=(0,n.select)('[id="rect'+f+'"]'),h=t?r(f):"white";(0,l.toggle)(f,null,h),p.attr("fill",l.curData[f].line)}}catch(t){o=!0,s=t}finally{try{!a&&d.return&&d.return()}finally{if(o)throw s}}}var v=e===i?"black":r(e),y=t?v:"white";(0,l.toggle)(e,null,y),c.attr("fill",l.curData[e].line)});var o=t.append("circle").attr("id","dot"+e).attr("class","legend circle").attr("cx",30).attr("cy",a).attr("r",5).attr("stroke","darkGrey").attr("fill",l.curData[e].dots);o.on("click",function(){var t=0===l.curData[e].dotsOpacity;if(e===i){var a=!0,c=!1,s=void 0;try{for(var u,d=Object.keys(l.curData).slice(1)[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value,p=(0,n.select)('[id="dot'+f+'"]'),h=t?r(f):"white";(0,l.toggle)(f,h,null),p.attr("fill",l.curData[f].dots)}}catch(t){c=!0,s=t}finally{try{!a&&d.return&&d.return()}finally{if(c)throw s}}}var v=e===i?"black":r(e),y=t?v:"white";(0,l.toggle)(e,y,null),o.attr("fill",l.curData[e].dots)}),t.append("text").attr("class","legend").attr("x",40).attr("y",a+5).style("font","8px sans-serif").text(decodeURI(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=a(2),l=a(4)},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e,a){var r=t.append("div").attr("class","col-lg-2 form-group metricPicker");return r.append("label").text("Metric"),r.append("select").attr("class","form-control").on("change",function(){var t=e[this.selectedIndex];c.default.setMetric(t)}).selectAll("option").data(e).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}).property("selected",function(t){return t===a}),r}function l(t,e,a){var r=t.append("div").attr("class","col-lg-3 form-group categoryPicker");return r.append("label").text("Sample Metadata Column"),r.append("select").attr("class","form-control").on("change",function(){var t=e[this.selectedIndex];c.default.setCategory(t)}).selectAll("option").data(e).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}).property("selected",function(t){return t===a}),r}Object.defineProperty(e,"__esModule",{value:!0}),e.addMetricPicker=n,e.addCategoryPicker=l;var i=a(3),c=r(i)}]);